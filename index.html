<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renault Captur 2026 - Digital Store</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --r-yellow: #FFCC33; --r-black: #000000; --r-white: #ffffff; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html { height: 100%; overflow: hidden; font-family: 'Montserrat', sans-serif; }

        /* --- LICZNIK GÓRNY --- */
        #step-counter {
            position: fixed; top: 0; left: 0; width: 100%; height: 5px;
            background: #eee; z-index: 10001;
        }
        #step-progress { height: 100%; width: 20%; background: var(--r-yellow); transition: 0.5s; }
        #step-label { 
            position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
            font-weight: 900; font-size: 0.7rem; z-index: 10002; letter-spacing: 2px;
        }

        /* --- SPOTLIGHT (SRANIE W BANIE) --- */
        #spotlight {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--r-black); color: white; z-index: 20000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; padding: 40px;
        }
        #spotlight h2 { font-size: 3rem; color: var(--r-yellow); margin-bottom: 20px; }
        #skip-btn { margin-top: 30px; display: none; }

        /* --- COOKIES & LOCK --- */
        #cookie-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 100px;
            background: rgba(0,0,0,0.9); color: white; z-index: 9999;
            display: flex; align-items: center; justify-content: center; gap: 20px;
        }
        .lock-shield {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10; cursor: not-allowed; display: flex; align-items: center; 
            justify-content: center; background: rgba(0,0,0,0.4); opacity: 0; transition: 0.3s;
        }
        .lock-shield:hover { opacity: 1; }
        .lock-shield:hover::after { content: "NAJPIERW ZAAKCEPTUJ COOKIES!"; color: var(--r-yellow); font-weight: 900; font-size: 0.6rem; }

        /* --- LAYOUT --- */
        header { height: 80px; display: flex; justify-content: space-between; align-items: center; padding: 0 5%; border-bottom: 1px solid #eee; }
        main { display: grid; grid-template-columns: 1fr 450px; height: calc(100% - 80px); }
        .preview { background: #f0f0f0; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .panel { padding: 40px; overflow-y: auto; position: relative; padding-bottom: 150px; }

        /* --- KATEGORIE WYPOSAŻENIA --- */
        .cat-header {
            height: 100px; background-size: cover; background-position: center;
            display: flex; align-items: center; padding: 20px; color: white;
            margin: 20px 0 10px 0; font-weight: 900; text-shadow: 2px 2px 4px #000;
        }
        .item { display: flex; justify-content: space-between; padding: 12px; border-bottom: 1px solid #eee; font-size: 0.8rem; cursor: pointer; }
        .item:hover { background: #f9f9f9; }
        .item input { accent-color: var(--r-yellow); }

        .btn { background: #000; color: #fff; padding: 15px; border: none; font-weight: 900; cursor: pointer; width: 100%; }
        .active { display: block !important; }
        .step { display: none; }

        /* FAKTURA */
        #invoice { padding: 30px; border: 2px solid #000; font-family: monospace; }
    </style>
</head>
<body>

    <div id="step-counter"><div id="step-progress"></div></div>
    <div id="step-label">KROK <span id="cur-num">1</span>/4</div>

    <div id="spotlight">
        <p style="color: var(--r-yellow); font-weight: 900;">CZY WIESZ, ŻE...</p>
        <h2 id="spot-title">NOWY NAPĘD E-TECH</h2>
        <p id="spot-desc">Zapewnia do 80% jazdy miejskiej w trybie elektrycznym.</p>
        <button id="skip-btn" class="btn" style="width: auto; padding: 10px 40px;" onclick="closeSpotlight()">POMIŃ (3s)</button>
    </div>

    <div id="cookie-bar">
        <p style="font-size: 0.7rem;">Używamy cookies, abyś mógł kupić auto. Serio.</p>
        <button class="btn" style="width: auto; background: var(--r-yellow); color: #000;" onclick="acceptCookies()">ZAAKCEPTUJ</button>
    </div>

    <header>
        <div style="font-weight: 900;">RENAULT STORE</div>
        <div style="font-weight: 700;"><span id="total-p">105 000</span> PLN</div>
    </header>

    <main>
        <section class="preview">
            <img src="https://images.unsplash.com/photo-1595786676378-433f169f14d8?q=80&w=1000" id="car-img" style="width: 80%;">
            <h1 style="font-weight: 900; margin-top: 20px;">CAPTUR 2026</h1>
        </section>

        <section class="panel">
            <div id="s1" class="step active">
                <h2>Wybierz bazę</h2>
                <div class="item" onclick="setBase(0, 'Biel')">Biel Alpejska <span>W cenie</span></div>
                <div class="item" onclick="setBase(2800, 'Czerń')">Czerń Etoile <span>+2 800 PLN</span></div>
                <div class="item" onclick="setBase(3500, 'Niebieski')">Niebieski Iron <span>+3 500 PLN</span></div>
            </div>

            <div id="s2" class="step">
                <h2>Konfiguracja opcji</h2>
                
                <div class="cat-header" style="background-image: url('https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&q=60&w=500')">PAKIET ZIMOWY</div>
                <div class="item"><label><input type="checkbox" onchange="addOpt('Podgrzewane fotele', 1200, this)"> Podgrzewane fotele przednie</label> <span>1 200 PLN</span></div>
                <div class="item"><label><input type="checkbox" onchange="addOpt('Podgrzewana kierownica', 800, this)"> Podgrzewana kierownica</label> <span>800 PLN</span></div>
                
                <div class="cat-header" style="background-image: url('https://images.unsplash.com/photo-1550009158-9ebf69173e03?auto=format&fit=crop&q=60&w=500')">TECH & MULTIMEDIA</div>
                <div class="item"><label><input type="checkbox" onchange="addOpt('System Harman Kardon', 4500, this)"> Audio Harman Kardon 9 głośników</label> <span>4 500 PLN</span></div>
                <div class="item"><label><input type="checkbox" onchange="addOpt('Ekran 10.4', 2100, this)"> Ekran dotykowy 10.4 cala</label> <span>2 100 PLN</span></div>
                <div class="item"><label><input type="checkbox" onchange="addOpt('Kamery 360', 3000, this)"> System kamer 360 stopni</label> <span>3 000 PLN</span></div>

                <div class="cat-header" style="background-image: url('https://images.unsplash.com/photo-1541443131876-44b03de101c5?auto=format&fit=crop&q=60&w=500')">DESIGN</div>
                <div class="item"><label><input type="checkbox" onchange="addOpt('Felgi 19', 3800, this)"> Felgi aluminiowe 19" Elia</label> <span>3 800 PLN</span></div>
                <div class="item"><label><input type="checkbox" onchange="addOpt('Dach szklany', 5500, this)"> Dach szklany panoramiczny</label> <span>5 500 PLN</span></div>
            </div>

            <div id="s3" class="step">
                <h2>Podsumowanie finansowe</h2>
                <p style="font-size: 0.8rem; margin: 20px 0;">Wpisz kod BLIK, aby wygenerować fakturę proforma.</p>
                <input type="text" id="blik" maxlength="6" placeholder="KOD BLIK" style="padding: 15px; width: 100%; text-align: center; font-size: 2rem; border: 2px solid #000; margin-bottom: 20px;">
                <button class="btn" onclick="pay()">ZAPŁAĆ I GENERUJ FAKTURĘ</button>
            </div>

            <div id="s4" class="step">
                <div id="invoice">
                    <h3>FAKTURA PROFORMA #2026/RN</h3>
                    <p style="font-size: 0.7rem; margin-bottom: 20px;">Sprzedawca: Renault Retail Group</p>
                    <div id="invoice-items" style="font-size: 0.8rem;"></div>
                    <hr style="margin: 15px 0;">
                    <h2 id="inv-total"></h2>
                </div>
                <button class="btn" style="margin-top: 20px; background: var(--r-yellow); color: #000;" onclick="window.print()">POBIERZ DOKUMENT (PDF)</button>
            </div>

            <div id="nav" style="margin-top: 30px; display: flex; gap: 10px; position: relative;">
                <button class="btn" style="background: #eee; color: #000;" onclick="move(-1)">WSTECZ</button>
                <div style="position: relative; flex: 1;">
                    <div id="lock" class="lock-shield"></div>
                    <button class="btn" onclick="move(1)">DALEJ</button>
                </div>
            </div>
        </section>
    </main>

    <script>
        let curStep = 1;
        let basePrice = 105000;
        let optPrice = 0;
        let selected = [];
        let cookiesAccepted = false;

        const funFacts = [
            { t: "ASYSTENT PAROWANIA", d: "Twój Captur zaparkuje sam, podczas gdy Ty pijesz kawę." },
            { t: "RECYKLING", d: "Tapicerka jest wykonana w 100% z przetworzonych butelek PET." },
            { t: "OŚWIETLENIE", d: "System Multi-Sense oferuje 8 kolorów dopasowanych do Twojego nastroju." }
        ];

        function acceptCookies() {
            cookiesAccepted = true;
            document.getElementById('cookie-bar').style.display = 'none';
            document.getElementById('lock').style.display = 'none';
        }

        function setBase(p, name) {
            basePrice = 105000 + p;
            updateUI();
        }

        function addOpt(name, p, el) {
            if(el.checked) {
                optPrice += p;
                selected.push({name, p});
            } else {
                optPrice -= p;
                selected = selected.filter(x => x.name !== name);
            }
            updateUI();
        }

        function updateUI() {
            let total = basePrice + optPrice;
            document.getElementById('total-p').innerText = total.toLocaleString();
            document.getElementById('cur-num').innerText = curStep;
            document.getElementById('step-progress').style.width = (curStep * 25) + "%";
        }

        function move(dir) {
            if(dir === 1) {
                if(!cookiesAccepted) return;
                showSpotlight();
            } else {
                changeStep(dir);
            }
        }

        function showSpotlight() {
            const spot = document.getElementById('spotlight');
            const fact = funFacts[Math.floor(Math.random()*funFacts.length)];
            document.getElementById('spot-title').innerText = fact.t;
            document.getElementById('spot-desc').innerText = fact.d;
            
            spot.style.display = 'flex';
            const btn = document.getElementById('skip-btn');
            btn.style.display = 'none';
            
            setTimeout(() => {
                btn.style.display = 'block';
                btn.innerText = "KONTYNUUJ";
            }, 3000);
        }

        function closeSpotlight() {
            document.getElementById('spotlight').style.display = 'none';
            changeStep(1);
        }

        function changeStep(dir) {
            document.getElementById(`s${curStep}`).classList.remove('active');
            curStep += dir;
            document.getElementById(`s${curStep}`).classList.add('active');
            updateUI();
            if(curStep === 4) generateInvoice();
        }

        function pay() {
            if(document.getElementById('blik').value.length === 6) {
                move(1);
            } else alert("Wpisz 6 cyfr BLIK!");
        }

        function generateInvoice() {
            const box = document.getElementById('invoice-items');
            box.innerHTML = `<p>Renault Captur 2026 - Podstawa: ${basePrice.toLocaleString()} PLN</p>`;
            selected.forEach(o => {
                box.innerHTML += `<p>${o.name}: ${o.p.toLocaleString()} PLN</p>`;
            });
            document.getElementById('inv-total').innerText = "SUMA: " + (basePrice + optPrice).toLocaleString() + " PLN";
            document.getElementById('nav').style.display = 'none';
        }
    </script>
</body>
</html>
